<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd
    http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

    <changeSet id="insertPartnershipDomain" author="renato.ibanhez">

        <comment>Inserting initial domain for partnership</comment>

        <insert tableName="partnership">
            <column name="id" valueComputed="${uuid_function}"/>
            <column name="reference" value="comparadores"/>
            <column name="name" value="Comparadores"/>
        </insert>

        <insert tableName="partnership">
            <column name="id" valueComputed="${uuid_function}"/>
            <column name="reference" value="retargeting"/>
            <column name="name" value="Retargeting"/>
        </insert>

        <insert tableName="partnership">
            <column name="id" valueComputed="${uuid_function}"/>
            <column name="reference" value="email_mkt"/>
            <column name="name" value="Email Marketing"/>
        </insert>

        <insert tableName="partnership">
            <column name="id" valueComputed="${uuid_function}"/>
            <column name="reference" value="afiliados"/>
            <column name="name" value="Afiliados"/>
        </insert>

        <insert tableName="partnership">
            <column name="id" valueComputed="${uuid_function}"/>
            <column name="reference" value="sem"/>
            <column name="name" value="SEM"/>
        </insert>

        <insert tableName="partnership">
            <column name="id" valueComputed="${uuid_function}"/>
            <column name="reference" value="b2b"/>
            <column name="name" value="B2B"/>
        </insert>

        <rollback>
            <sql>DELETE FROM partnership WHERE reference in ('comparadores', 'email_mkt', 'retargeting', 'afiliados',
                'sem', 'b2b')
            </sql>
        </rollback>
    </changeSet>

    <changeSet id="insertPartnerGoogle" author="renato.ibanhez" context="dev-warmup">

        <preConditions>
            <sqlCheck expectedResult="1">SELECT COUNT(1) FROM partnership where reference = 'sem'</sqlCheck>
        </preConditions>

        <comment>Inserting google partner for test in dev environment</comment>

        <insert tableName="partner">
            <column name="id" valueComputed="${uuid_function}"/>
            <column name="reference" value="google"/>
            <column name="name" value="Google"/>
            <column name="description" value="Google Description"/>
            <column name="partnership_id" valueComputed="(SELECT id FROM partnership where reference = 'sem')"/>
            <column name="creation_date" valueDate="${now}"/>
        </insert>

    </changeSet>
</databaseChangeLog>