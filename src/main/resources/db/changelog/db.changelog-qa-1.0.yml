databaseChangeLog:
  - changeSet:
      id: "insertDefaultTemplate"
      author: "adisson.gomes"
      comment: "Insert default template. Based on Zoom CPC XML"
      changes:
        - insert:
            tableName: feed_template
            columns:
              - column:
                  name: id
                  valueComputed: "${uuid_function}"
              - column:
                  name: name
                  value: "Default Template"
              - column:
                  name: slug
                  value: "default-template"
              - column:
                  name: header
                  value: "<produtos>"
              - column:
                  name: body
                  value: "<#compress>
                          <#list products as p>
                              <PRODUTO>
                                  <SKUID>${p.id}</SKUID>
                                  <CODIGO>0</CODIGO>
                                  <DESCRICAO>${p.title}</DESCRICAO>
                                  <DEPARTAMENTO>${p.categories[0].name}</DEPARTAMENTO>
                                  <#if p.categories?size gt 1>
                                      <CATEGORIA>${p.categories[1].name}</CATEGORIA>
                                  </#if>
                                  <#if p.categories?size gt 2>
                                      <SUBCATEGORIA>${p.categories[2].name}</SUBCATEGORIA>
                                  </#if>
                                  <MARCA>${p.brandName}</MARCA>
                                  <STATUS>NOVO</STATUS>
                                  <ISBN/>
                                  <EDITORA/>
                                  <AUTOR/>
                                  <EAN>${p.ean}</EAN>
                                  <CODIGOSKUFORNECEDOR/>
                                  <SITE>walmart.com.br</SITE>
                                  <QTDRESENHAS>0</QTDRESENHAS>
                                  <PRECODE>R$ ${p.payment.price}</PRECODE>
                                  <PRECO>R$ <#if p.payment.suggestionPrice gt 0>${p.payment.suggestionPrice}<#else>${p.payment.discountedPrice}</#if></PRECO>
                                  <NPARCELA>${p.payment.installmentAmount}</NPARCELA>
                                  <VPARCELA>R$ ${p.payment.valuePerInstallment}</VPARCELA>
                                  <URL>${p.urlWeb}</URL>
                                  <URL_IMAGEM>${p.mainImage}</URL_IMAGEM>
                              </PRODUTO>
                          </#list>
                          </#compress>"
              - column:
                  name: footer
                  value: "</produtos>"
              - column:
                  name: separator
                  value: ">"
              - column:
                  name: format
                  value: "xml"
  - changeSet:
        id: "insertInventoryTemplate"
        author: "thiago.lima"
        comment: "Insert google based inventory template"
        changes:
          - insert:
              tableName: feed_template
              columns:
                - column:
                    name: id
                    valueComputed: "${uuid_function}"
                - column:
                    name: name
                    value: "Inventory Template"
                - column:
                    name: slug
                    value: "inventory"
                - column:
                    name: header
                    value: "id    price    availability\n"
                - column:
                    name: body
                    value: "<#list products as p>${p.id}	<#if p.payment.suggestionPrice gt 0>${p.payment.suggestionPrice}<#else>${p.payment.discountedPrice}</#if>	<#if p.quantity gt 0>in stock<#else>out of stock</#if>\n</#list>"
                - column:
                    name: footer
                    value: " "
                - column:
                    name: separator
                    value: "T"
                - column:
                    name: format
                    value: "tsv"